installer/
│
├── public/                           # ── Tout ce qui est exposé publiquement (curl | bash)
│   ├── install.sh                    # Universal entry point – detects OS → calls distro-specific installer
│   ├── wcp360-install.sh             # Main orchestrator (like hst-install.sh) – common logic + dispatcher
│   ├── wcp360-install-ubuntu.sh      # Ubuntu-specific full installer (20.04 / 22.04 / 24.04)
│   └── wcp360-install-debian.sh      # Debian-specific full installer (11 / 12)
│
├── base/                             # ── Installation fundamentals – always executed first (requested)
│   ├── 01-os-detection.sh            # OS / release / codename / architecture detection + compatibility check
│   ├── 02-requirements.sh            # Root check, RAM, disk space, architecture (x86_64/arm64), no existing panel
│   ├── 03-network.sh                 # Hostname, FQDN validation, public IP detection, port conflicts (80/443/8083…)
│   ├── 04-logging.sh                 # Setup install log file + tee function + colored output helpers
│   ├── 05-arguments.sh               # Parse all --flags / --options / positional arguments
│   ├── 06-questions.sh               # Interactive prompts when flags are missing (email, password, hostname…)
│   └── 07-prepare-os.sh              # apt/yum/dnf update, timezone, locales, disable apparmor if needed…
│
├── steps/                            # ── Modular installation steps (executed in numerical order)
│   ├── 10-system-base.sh             # curl, wget, git, unzip, bc, jq, ssl-cert tooling…
│   ├── 20-webserver.sh               # nginx and/or apache2 + modules + event/mpm choice
│   ├── 30-php.sh                     # Multi-PHP versions install + fpm pools + common extensions
│   ├── 40-database.sh                # MariaDB / PostgreSQL / optional Percona / Timescale…
│   ├── 50-mailserver.sh              # Exim / Postfix + Dovecot + Rspamd + ClamAV + DKIM + DMARC
│   ├── 60-security.sh                # Fail2Ban, UFW / nftables / firewalld, SSH hardening, umask…
│   ├── 70-ssl.sh                     # acme.sh or certbot + self-signed fallback + strong dhparam
│   ├── 80-panel-core.sh              # Copy panel files, chown, create admin user, generate API key…
│   ├── 85-panel-frontend.sh          # Build frontend (if npm/vite/react/vue needed) or copy static assets
│   ├── 90-daemons.sh                 # Install & enable wcp360-backend, worker@, scheduler…
│   └── 99-finalize.sh                # Create version file, show success message, print important info
│
├── libraries/                        # ── Reusable bash functions (sourced by many scripts)
│   ├── colors.sh                     # ANSI color definitions + echo_ok / echo_error / echo_info
│   ├── messages.sh                   # print_welcome / print_summary / print_failed / print_success
│   ├── os.sh                         # is_debian / is_ubuntu / get_os_release / supported_versions
│   ├── packages.sh                   # install_package_list / apt_install_quiet / check_package_installed
│   ├── service.sh                    # systemctl_enable / systemctl_restart_safe / check_service_status
│   ├── user.sh                       # create_system_user / add_user_to_group / random_password
│   ├── fs.sh                         # safe_mkdir / safe_chown / safe_chmod / backup_file
│   └── string.sh                     # random_string / to_lower / validate_email / validate_domain
│
├── config/                           # ── Installer presets & defaults
│   ├── defaults.conf                 # Default values for --email --password --hostname --php-versions …
│   ├── minimal.conf                  # Preset: web + one php + one db (no mail)
│   ├── standard.conf                 # Web + mail + db + basic security
│   ├── full.conf                     # Everything + monitoring + quota + backups
│   └── expert.conf                   # All options exposed + advanced tuning
│
├── templates/                        # ── Configuration templates (sed/envsubst or similar)
│   ├── nginx/
│   │   ├── main.conf.tpl
│   │   ├── site.conf.tpl
│   │   └── security-headers.conf
│   ├── php/
│   │   ├── php-fpm-pool.conf.tpl
│   │   └── php.ini-production.tpl
│   ├── mariadb/
│   │   └── my.cnf.d/50-performance.cnf.tpl
│   ├── dovecot/
│   ├── exim4/
│   ├── fail2ban/
│   └── wcp360/
│       └── backend.conf.tpl
│
├── pkg-lists/                        # ── One file = one feature (xargs apt install -y < file)
│   ├── 00-essential.txt
│   ├── web-nginx.txt
│   ├── web-apache.txt
│   ├── php81.txt          php82.txt          php83.txt
│   ├── mariadb.txt
│   ├── mail-full.txt
│   ├── security.txt
│   └── monitoring-optional.txt
│
├── systemd/                          # Custom services & targets
│   ├── wcp360-backend.service
│   ├── wcp360-worker@.service
│   ├── wcp360-scheduler.service
│   └── wcp360.target
│
├── upgrade/
│   ├── current-version.txt           # Written at install time – used to know from which version to upgrade
│   ├── functions-upgrade.sh
│   ├── 1.0.0-to-1.0.1.sh
│   ├── 1.0.x-to-1.1.0.sh
│   └── manual/
│       └── 2026-php83-default.sh
│
├── addons/                           # Optional components installable later (via wcp addon install …)
│   ├── netdata.sh
│   ├── redis.sh
│   ├── memcached.sh
│   └── nodejs.sh
│
├── uninstall/
│   └── uninstall.sh                  # Safe removal (with confirmation steps)
│
└── docs/
    ├── FLAGS.md                      # All --option explained
    ├── TROUBLESHOOTING.md
    └── STRUCTURE.md                  # This file – explains folders & logic